<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <h:head>
        <title>Active Web Center</title>
        <style>
            #painelLoginCarrinho {z-index:2 !important; }
            #painelLoginCarrinho div {overflow:visible;}
            
            #painelMenu {z-index:1 !important; }
            #painelMenu div {overflow:visible;}
        </style> 
    </h:head>
    <h:body>
        <p:layout style="height:76px; width:100%">
            <p:layoutUnit position="west" size="33%">
                <p style="margin:0px; padding:0px; margin-left:20%; margin-top:3%; font-size:26px">Active Web Center</p>
            </p:layoutUnit>
            <p:layoutUnit position="center" size="34%">
                <div style="margin:0px; margin-left:20%; margin-top:2%">
                    <h:form>
                        <p:inputText style="width:70%" value="#{controladorProduto.campoBusca}"></p:inputText>
                        <p:commandButton icon="ui-icon-search" action="#{controladorProduto.buscarProdutosStr(controladorProduto.campoBusca)}" ajax="false"></p:commandButton>
                    </h:form>
                </div>   
            </p:layoutUnit>
            <p:layoutUnit position="east" size="33%" id="painelLoginCarrinho">
                <p:layout>
                    <p:layoutUnit position="west" size="50%" style="border-style:none">
                        <p:menubar>
                            <p:submenu label="Entrar">
                                <p:menuitem value="Logar" url="#"/>
                                <p:menuitem value="Cadastrar" url="#"/>
                            </p:submenu>
                        </p:menubar>
                    </p:layoutUnit>
                    <p:layoutUnit position="center" size="50%" style="border-style:none">
                        <p:menubar>
                            <p:submenu label="Carrinho" icon="ui-icon-cart">
                                <p:menuitem value="Vazio" url="#" />
                            </p:submenu>
                        </p:menubar>
                    </p:layoutUnit>
                </p:layout>
            </p:layoutUnit>
        </p:layout>
        <p:layout style="height:50px; width:100%; margin:0px; padding:0px; margin-top:6px">
            <p:layoutUnit position="center" size="100%" id="painelMenu">
                <h:form>
                <p:megaMenu  style="margin-top:-5px;border-style:none">
                    <p:submenu label="Masculino">
                        <p:column>
                            <p:submenu label="Categorias">
                                <p:menuitem value="Camisetas" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.masculino, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Bermudas" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.masculino, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Calçados" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.masculino, categoriaEnum.calcados)}" ajax="false" />
                            </p:submenu>   
                            <p:submenu label="Departamentos">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.masculino, departamentoEnum.corrida)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.masculino, departamentoEnum.futebol)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.masculino, departamentoEnum.casual)}" ajax="false" />
                            </p:submenu>
                        </p:column>
                        <p:column>
                            <p:submenu label="Camisetas">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.corrida, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.futebol, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.casual, categoriaEnum.camisetas)}" ajax="false" />
                            </p:submenu>
                            <p:submenu label="Bermudas">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.corrida, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.futebol, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.casual, categoriaEnum.bermudas)}" ajax="false" />
                            </p:submenu>
                            <p:submenu label="Calçados">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.corrida, categoriaEnum.calcados)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.futebol, categoriaEnum.calcados)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.masculino, departamentoEnum.casual, categoriaEnum.calcados)}" ajax="false" />
                            </p:submenu>
                        </p:column>   
                    </p:submenu>
                    <p:submenu label="Feminino">
                        <p:column>
                            <p:submenu label="Categorias">
                                <p:menuitem value="Camisetas" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.feminino, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Bermudas" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.feminino, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Calçados" action="#{controladorProduto.buscarProdutosGenCat(generoEnum.feminino, categoriaEnum.calcados)}" ajax="false" />
                            </p:submenu>
                            <p:submenu label="Departamentos">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.feminino, departamentoEnum.corrida)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.feminino, departamentoEnum.futebol)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDep(generoEnum.feminino, departamentoEnum.casual)}" ajax="false" />
                            </p:submenu>
                        </p:column>
                        <p:column>
                            <p:submenu label="Camisetas">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.corrida, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.futebol, categoriaEnum.camisetas)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.casual, categoriaEnum.camisetas)}" ajax="false" />
                            </p:submenu>
                            <p:submenu label="Bermudas">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.corrida, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.futebol, categoriaEnum.bermudas)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.casual, categoriaEnum.bermudas)}" ajax="false" />
                            </p:submenu>
                            <p:submenu label="Calçados">
                                <p:menuitem value="Corrida" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.corrida, categoriaEnum.calcados)}" ajax="false" />
                                <p:menuitem value="Futebol" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.futebol, categoriaEnum.calcados)}" ajax="false" />
                                <p:menuitem value="Casual" action="#{controladorProduto.buscarProdutosGenDepCat(generoEnum.feminino, departamentoEnum.casual, categoriaEnum.calcados)}" ajax="false" />
                            </p:submenu>
                        </p:column>
                    </p:submenu>  
                </p:megaMenu>
                </h:form>
            </p:layoutUnit>
        </p:layout>
            
        <!-- componente que exibe sequencia de imagens no inicio da visita ao site -->
        <h:panelGroup rendered="#{not controladorProduto.buscaRealizada}">
            <div style="margin-top:6px; margin-bottom:6px;" align="center">
                <p:imageSwitch effect="fade" style="z-index:-1">
                    <p:graphicImage url="img/propagandas/1.jpg" style="max-width:100%"/>
                    <p:graphicImage url="img/propagandas/2.jpg" style="max-width:100%" />
                    <p:graphicImage url="img/propagandas/3.jpg" style="max-width:100%" />
                    <p:graphicImage url="img/propagandas/4.jpg" style="max-width:100%" />
                </p:imageSwitch>
            </div>
        </h:panelGroup>
        
        <!--componentes que sao mostrados caso alguma busca com resultados tenha sido realizada (lista de produtos nao está vazia) -->
        <p:layout style="height:34px; width:100%; margin:0px; padding:0px; margin-top:6px; margin-bottom:6px" rendered="#{not empty controladorProduto.produtos}">
            <p:layoutUnit position="center" size="100%">
                <h:form>
                    <div style="font-size:12px; text-align:right; position:relative; top:4px; margin-right: 4px">
                        Ordenar por: 
                        <h:commandLink value="Mais Novos" action="#{controladorProduto.ordenarMaisNovos}" style="#{(controladorProduto.ordenacaoAtual == ordenacaoLista.maisNovos) ? 'font-weight:bold' : ''}"/> |
                        <h:commandLink value="Mais Vendidos" action="#{controladorProduto.ordenarMaisVendidos}" style="#{(controladorProduto.ordenacaoAtual == ordenacaoLista.maisVendidos) ? 'font-weight:bold' : ''}" /> |
                        <h:commandLink value="Menor Preço" action="#{controladorProduto.ordenarMenorPreco}" style="#{(controladorProduto.ordenacaoAtual == ordenacaoLista.menorPreco) ? 'font-weight:bold' : ''}" /> |
                        <h:commandLink value="Maior Preço" action="#{controladorProduto.ordenarMaiorPreco}" style="#{(controladorProduto.ordenacaoAtual == ordenacaoLista.maiorPreco) ? 'font-weight:bold' : ''}" />
                    </div>    
                </h:form>
            </p:layoutUnit>
        </p:layout>
        <p:dataGrid var="produtos" value="#{controladorProduto.produtos}" columns="3" rows="12" paginator="true" paginatorPosition="bottom" rendered="#{not empty controladorProduto.produtos}"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="6,12,16">
            <p:panel header="#{produtos.nome}" style="text-align:center;">
                <h:panelGrid columns="1" style="width:100%">
                    <p:graphicImage url="#{produtos.imagemURL}" />
                    <h:outputText value="#{produtos.categoria.toString()}" />
                    <h:outputText value="#{produtos.departamento.toString()}" />
                    <h:outputText value="#{produtos.genero.toString()}" />                                
                    <h:outputText value="R$ #{produtos.preco}" />                    
                </h:panelGrid>    
            </p:panel>    
        </p:dataGrid>
        
        <!-- mensagem mostrada após uma busca sem resultados -->
        <p:layout style="height:120px; width:100%; margin-top:6px" rendered="#{empty controladorProduto.produtos and controladorProduto.buscaRealizada}">
            <p:layoutUnit position="center" size="100%">
                <div style="font-weight:bold">
                    Busca sem resultados, tente novamente
                </div>
            </p:layoutUnit>
        </p:layout>
        
        <!-- footer -->
        <p:layout style="height:50px; width:100%; margin:0px; padding:0px; margin-top:6px">
            <p:layoutUnit position="center" size="100%">
                <div align="center" style="position:relative; top:6px">
                   Footer 
                </div>
            </p:layoutUnit>
        </p:layout>
      
        <!-- interface simples de cadastro de produtos para testes das funcionalidades. isso não faz parte dessa página, cadastro de produtos estará em outra area do site futuramente -->
        <br /> <br /> <br/> <br/> <br/> <br/> <br/> <br/>
         <h:form>
            Nome <br />
            <h:inputText value="#{produto.nome}" /> <br /><br />
            Preco <br />
            <h:inputText value="#{produto.preco}" /> <br /><br />
            Categoria <br />
            <h:selectOneMenu value="#{produto.categoria}">
                <f:selectItem itemLabel="#{categoriaEnum.categorias[0].toString()}" itemValue="#{categoriaEnum.categorias[0]}" />
                <f:selectItem itemLabel="#{categoriaEnum.categorias[1].toString()}" itemValue="#{categoriaEnum.categorias[1]}" />
                <f:selectItem itemLabel="#{categoriaEnum.categorias[2].toString()}" itemValue="#{categoriaEnum.categorias[2]}" />
             </h:selectOneMenu> <br /> <br />
            Departamento <br />
            <h:selectOneMenu value="#{produto.departamento}">
                <f:selectItem itemLabel="#{departamentoEnum.departamentos[0].toString()}" itemValue="#{departamentoEnum.departamentos[0]}" />
                <f:selectItem itemLabel="#{departamentoEnum.departamentos[1].toString()}" itemValue="#{departamentoEnum.departamentos[1]}" />
                <f:selectItem itemLabel="#{departamentoEnum.departamentos[2].toString()}" itemValue="#{departamentoEnum.departamentos[2]}" />
             </h:selectOneMenu> <br /> <br />
            Genero <br />
            <h:selectOneMenu value="#{produto.genero}">
                <f:selectItem itemLabel="#{generoEnum.generos[0].toString()}" itemValue="#{generoEnum.generos[0]}" />
                <f:selectItem itemLabel="#{generoEnum.generos[1].toString()}" itemValue="#{generoEnum.generos[1]}" />
            </h:selectOneMenu> <br /> <br />
            <h:commandButton value="Adicionar" action="#{controladorProduto.adicionar(produto)}" />
            <h:commandButton value="Atualizar" action="#{controladorProduto.atualizar(produto, controladorProduto.produtos[0].id)}" />
            <h:commandButton value="Remover" action="#{controladorProduto.remover(controladorProduto.produtos[0].id)}" />
            <h:commandButton value="Listar Tudo" action="#{controladorProduto.listarTodosProdutos()}" />
            <h:commandButton value="Insere Teste" action="#{controladorProduto.insereProdutosTeste()}" />
        </h:form>
        <br /> <br />
        
        <p:dataList value="#{controladorProduto.produtos}" var="produtos">
            #{produtos.nome}, #{produtos.categoria.toString()}, #{produtos.genero.toString()}, #{produtos.imagemURL}
        </p:dataList>
    </h:body>
</html>

